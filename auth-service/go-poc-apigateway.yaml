  swagger: '2.0'
  info:
    title: GO POC API Gateway
    version: 1.0.0

  paths:

  # üîê Auth Service
    /token:
      get:
        summary: Get JWT token
        operationId: tokenHandler
        x-google-backend:
          address: http://35.192.100.31.nip.io
          path_translation: APPEND_PATH_TO_ADDRESS
        responses:
          '200':
            description: Token returned
          '406':
            description: Failed to get JWT_USER_NAME,Failed to get JWT_SECRET_KEY
          '500':
            description: Failed to generate token

    # üîê Order Service
    /orders:
      post:
        summary: Create new order
        operationId: createOrder
        x-google-backend:
          address: http://34.70.2.121.nip.io  
          path_translation: APPEND_PATH_TO_ADDRESS
          disable_auth: true
        responses:
          '201':
            description: Created
          '401':
            description: Unauthorized
          '500':
            description: Internal Server Error
          '400':
            description: Bad Request

    /orders/{id}:
      get:
        summary: Get order by ID
        operationId: getOrderById
        parameters:
          - name: id
            in: path
            required: true
            type: string
        x-google-backend:
          address: http://34.70.2.121.nip.io
          path_translation: APPEND_PATH_TO_ADDRESS
          disable_auth: true
        responses:
          '200':
            description: Order details
          '404':
            description: Not found
          '500':
            description: Internal Server Error
          '401':
            description: Unauthorized

    /orders/{id}/status:
      patch:
        summary: Update order status
        operationId: updateOrderStatus
        parameters:
          - name: id
            in: path
            required: true
            type: string
        x-google-backend:
          address: http://34.70.2.121.nip.io
          path_translation: APPEND_PATH_TO_ADDRESS
          disable_auth: true
        responses:
          '200':
            description: Status updated
          '406':
            description: Not acceptable
          '500':
            description: Internal Server Error
          '401':
            description: Unauthorized
  
    # üí≥ Payment Service
    /payment:
      get:
        summary: Start payment service
        operationId: paymentHandler
        x-google-backend:
          address: http://34.41.233.215.nip.io
          path_translation: APPEND_PATH_TO_ADDRESS
        responses:
          '200':
            description: Payment Service started and subscribed to order events